<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ç‰©ç†å¼•æ“éŠæˆ²</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        #info {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 16px;
            font-family: Arial;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
        .floating-text {
            position: absolute;
            color: white;
            font-size: 20px;
            font-weight: bold;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }
    </style>
</head>
<body>
    <div id="info">ç‰©é«”æ•¸é‡: 0 | FPS: 0</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script>
        const Engine = Matter.Engine,
            Render = Matter.Render,
            Runner = Matter.Runner,
            Bodies = Matter.Bodies,
            Composite = Matter.Composite,
            Mouse = Matter.Mouse,
            World = Matter.World;

        // å‰µå»ºå¼•æ“
        const engine = Engine.create();
        
        // å‰µå»ºæ¸²æŸ“å™¨
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: '#222'
            }
        });

        // å‰µå»ºé‚Šç•Œ
        const walls = [
            Bodies.rectangle(window.innerWidth/2, 0, window.innerWidth, 60, { isStatic: true }),
            Bodies.rectangle(window.innerWidth/2, window.innerHeight, window.innerWidth, 60, { isStatic: true }),
            Bodies.rectangle(0, window.innerHeight/2, 60, window.innerHeight, { isStatic: true }),
            Bodies.rectangle(window.innerWidth, window.innerHeight/2, 60, window.innerHeight, { isStatic: true })
        ];
        World.add(engine.world, walls);

        // å•Ÿå‹•æ¸²æŸ“å™¨å’Œå¼•æ“
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);
        engine.timing.timeScale = 0.7;

        // FPSè¨ˆç®—
        let frameCount = 0;
        let fps = 0;
        let lastTime = performance.now();

        function calculateFPS() {
            const currentTime = performance.now();
            frameCount++;
            
            if (currentTime - lastTime >= 1000) {
                fps = frameCount;
                frameCount = 0;
                lastTime = currentTime;
            }
        }

        // æ›´æ–° emoji æ•¸çµ„ï¼Œåªä¿ç•™éé£Ÿç”¨å‹•ç‰©
        const emojiData = [
            { emoji: 'ğŸ¶', name: 'å°ç‹—' },
            { emoji: 'ğŸ±', name: 'å°è²“' },
            { emoji: 'ğŸ­', name: 'è€é¼ ' },
            { emoji: 'ğŸ¹', name: 'å€‰é¼ ' },
            { emoji: 'ğŸ°', name: 'å…”å­' },
            { emoji: 'ğŸ¦Š', name: 'ç‹ç‹¸' },
            { emoji: 'ğŸ»', name: 'ç†Šç†Š' },
            { emoji: 'ğŸ¼', name: 'ç†Šè²“' },
            { emoji: 'ğŸ¨', name: 'ç„¡å°¾ç†Š' },
            { emoji: 'ğŸ¯', name: 'è€è™' },
            { emoji: 'ğŸ¦', name: 'ç…å­' },
            { emoji: 'ğŸ®', name: 'é’è›™' },
            { emoji: 'ğŸµ', name: 'çŒ´å­' },
            { emoji: 'ğŸ¦„', name: 'ç¨è§’ç¸' },
            { emoji: 'ğŸ”', name: 'ä¼éµ' },
            { emoji: 'ğŸ¦…', name: 'è€é·¹' },
            { emoji: 'ğŸ¦‰', name: 'è²“é ­é·¹' },
            { emoji: 'ğŸ¦‹', name: 'è´è¶' },
            { emoji: 'ğŸ™', name: 'é•·é ¸é¹¿' },
            { emoji: 'ğŸ˜', name: 'å¤§è±¡' },
            { emoji: 'ğŸ¦˜', name: 'è¢‹é¼ ' },
            { emoji: 'ğŸ¦¥', name: 'æ¨¹æ‡¶' },
            { emoji: 'ğŸ¦¦', name: 'æ°´çº' },
            { emoji: 'ğŸ¦', name: 'æµ£ç†Š' }
        ];

        // æ·»åŠ æµ®å‹•æ–‡å­—å‡½æ•¸
        function createFloatingText(x, y, text) {
            const floatingText = document.createElement('div');
            floatingText.className = 'floating-text';
            floatingText.textContent = text;
            floatingText.style.left = `${x}px`;
            floatingText.style.top = `${y}px`;
            document.body.appendChild(floatingText);

            // 1ç§’å¾Œç§»é™¤å…ƒç´ 
            setTimeout(() => {
                document.body.removeChild(floatingText);
            }, 1000);
        }

        // ä¿®æ”¹ç”Ÿæˆéš¨æ©Ÿå½¢ç‹€çš„å‡½æ•¸
        function createRandomBody(x, y) {
            const size = 50 + Math.random() * 50;
            const emojiInfo = emojiData[Math.floor(Math.random() * emojiData.length)];
            
            createFloatingText(x, y, emojiInfo.name);
            
            return Bodies.circle(x, y, size/2, {
                render: {
                    sprite: {
                        texture: `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 ${size} ${size}"><text x="50%" y="50%" font-size="${size}px" text-anchor="middle" dominant-baseline="middle">${emojiInfo.emoji}</text></svg>`,
                        xScale: 1,
                        yScale: 1
                    }
                },
                friction: 0.1,
                restitution: 0.3,
                density: 0.001,
                airFriction: 0.02
            });
        }

        let isCreating = false;
        let createInterval;

        document.addEventListener('mousedown', (e) => {
            if (e.button === 0) {
                isCreating = true;
                createInterval = setInterval(() => {
                    const body = createRandomBody(e.clientX, e.clientY);
                    World.add(engine.world, body);
                }, 200);
            }
        });

        document.addEventListener('mouseup', () => {
            isCreating = false;
            clearInterval(createInterval);
        });

        document.addEventListener('mousemove', (e) => {
            if (isCreating) {
                const body = createRandomBody(e.clientX, e.clientY);
                World.add(engine.world, body);
            }
        });

        // æ›´æ–°ä¿¡æ¯é¡¯ç¤º
        setInterval(() => {
            calculateFPS();
            document.getElementById('info').textContent = 
                `ç‰©é«”æ•¸é‡: ${engine.world.bodies.length - 4} | FPS: ${fps}`;
        }, 100);
    </script>
</body>
</html>
